<!DOCTYPE html>
<html lang="en">

<head>
  <title>AllScale Dashboard - Data Distribution</title>
  <meta charset="utf-8">
  <link href="css/dashboard.css" rel="stylesheet">
  <link rel="shortcut icon" href="images/allscale.ico" type="image/x-icon">
  <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
</head>

<body>

  <div id="header">
    <div id="header-logo">
      <img alt="AllScale Logo" src="images/allscale.png">
    </div>
    <div id="header-text">Data Distribution</div>
    <select id="data-item-selection" disabled="true" onchange="dataItemSelectionChanged()">
      <option value="-1"> - no data items - </option>
    </select>
  </div>

  <div id="dataviz"></div>

  <script src="js/three.min.js"></script>
  <script src="js/controls/OrbitControls.js"></script>

  <script>
    var data_distribution_state = [];
  </script>

  <script src="js/test/test_data_3.js"></script>
  <script src="js/test/test_data_4.js"></script>
  <script src="js/test/test_data_15.js"></script>
  <script src="js/test/test_data_16.js"></script>

  <script src="js/data_distribution.js"></script>

  <script>
    function processMessage(evt) {
      data = JSON.parse(evt.data);
      updateDataModel(data.nodes);
      buildScene();
    }

    window.addEventListener("load", function (evt) {
      var ws = new WebSocket(`ws://${window.location.host}/ws`);
      ws.onmessage = processMessage;
      ws.onopen = function (evt) {
        console.info("Status Open");
      };
      ws.onclose = function (evt) {
        console.info("Status Closed");
      };
      ws.onerror = function (evt) {
        console.error(evt.data);
      };
    });
  </script>

</body>

</html>
